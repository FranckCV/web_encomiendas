{% extends 'MAESTRA_GENERAL.html' %}

{% block titulo %}
Registro de Envíos
{% endblock %}

{% block estilos %}
<link rel="stylesheet" href="/static/css/registro_envio.css">
{% endblock %}

{% block contenido %}

<div class="navigation-links">
  <a href="{{ url_for('tipos_envio') }}" class="back-link">← Regresar</a>
</div>

<div class="container">
  <h1 class="titulo-envio">REGISTRO DE ENVÍOS</h1>

  <div class="steps-container">
    <div class="step active">
      <div class="circle">
        <img src="/static/img/usuario.png" alt="Datos personales" />
      </div>
      <p>Datos personales</p>
    </div>
    <div class="line"></div>
    <div class="step">
      <div class="circle">
        <img src="/static/img/chek.png" alt="Confirma tus datos" />
      </div>
      <p>Confirma tus datos</p>
    </div>
    <div class="line"></div>
    <div class="step">
      <div class="circle">
        <img src="/static/img/medio.png" alt="Medios de pago" />
      </div>
      <p>Medios de pago</p>
    </div>
  </div>

  <form id="formulario-envio" class="formulario">
    <div id="seccion-quien-envia" class="seccion">
      <h2 class="titulo-seccion">¿Quién envía?</h2>
      <div class="form-group">
        <select>
          <option>Tipo De Documento</option>
        </select>
        <input type="text" placeholder="Número">
        <input type="text" placeholder="Confirma tu teléfono">
      </div>
      <div class="form-group">
        <input type="text" placeholder="Nombre completo">
        <input type="email" placeholder="Confirma tu email">
      </div>
    </div>

    <div id="seccion-que-envias" class="seccion" style="display:none;">
      <h2 class="titulo-seccion">¿Qué envías?</h2>
      <div class="form-group">
        <select>
          <option>Seleccionar artículo</option>
        </select>
        <input type="text" placeholder="Especificar artículo">
        <input type="text" placeholder="Valor S/">
      </div>
      <div class="form-group">
        <input type="text" placeholder="Largo (cm)">
        <input type="text" placeholder="Ancho (cm)">
        <input type="text" placeholder="Altura (cm)">
        <input type="text" placeholder="Peso (kg)">
      </div>
      <div class="form-group">
        <div style="flex: 1 1 calc(50% - 10px); min-width: 250px;">
          <label for="origen" style="font-weight: 600; color: #0E1D63;">Origen</label>
          <select id="origen">
            <option>Ingrese el punto de partida</option>
          </select>
        </div>

        <div style="flex: 1 1 calc(50% - 10px); min-width: 250px;">
          <label for="destino" style="font-weight: 600; color: #0E1D63;">Destino</label>
          <select id="destino">
            <option>Ingresa el punto de llegada</option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <select id="tipoEntrega">
          <option >Seleccione tipo de recepción</option>
          <option value="tienda">Recojo en tienda </option>
          <option value="tienda">Con recojo y pago en tienda</option>
          <option value="domicilio">Envio a domicilio</option>
        </select>
        <div class="form-group" id="contenedor-tienda" style="display: none;">
          <select id="tienda" name="tienda">
            <option value="tienda">Seleccione tienda</option>
            <option value="tienda1">Tienda Trujillo</option>
            <option value="tienda2">Tienda Chiclayo</option>
          </select>
        </div>
      </div>

      <!-- Dirección de entrega -->
      <div class="form-group" id="contenedor-direccion" style="display: none;">
        <div class="input-con-icono" style="flex:1 1 100%; min-width: 250px;">
          <input type="text" placeholder="Dirección de entrega">
        </div>
        <div style="flex:1 1 100%; min-width: 250px;">
          <input type="text" placeholder="Referencias">
        </div>
      </div>

    </div>

    <div id="seccion-quien-recibe" class="seccion" style="display:none;">
      <h2 class="titulo-seccion">¿Quién recibe?</h2>
      <div class="form-group">
        <select>
          <option>Tipo De Documento</option>
        </select>
        <input type="text" placeholder="DNI/RUC/CE">
        <input type="text" placeholder="Celular/Teléfono">
      </div>
      <div class="form-group">
        <input type="text" placeholder="Nombres">
        <input type="text" placeholder="Apellido Paterno">
        <input type="text" placeholder="Apellido Materno">
      </div>
    </div>

    <button type="button" class="btn-continuar" id="btn-continuar">CONTINUAR</button>
  </form>
</div>

{% endblock %}

{% block scripts %}
<script>
  const btnContinuar = document.getElementById('btn-continuar');
  const seccionQuienEnvia = document.getElementById('seccion-quien-envia');
  const seccionQueEnvias = document.getElementById('seccion-que-envias');
  const seccionQuienRecibe = document.getElementById('seccion-quien-recibe');

  btnContinuar.addEventListener('click', function () {
    if (seccionQueEnvias.style.display === 'none') {
      seccionQueEnvias.style.display = 'block';
      btnContinuar.textContent = 'CONTINUAR';
    } else if (seccionQuienRecibe.style.display === 'none') {
      seccionQuienRecibe.style.display = 'block';
      btnContinuar.textContent = 'CONTINUAR';
    } else {
      alert('Formulario completo.');
    }
  });

  // Funcionalidad para mostrar tienda o dirección
  const tipoEntrega = document.getElementById('tipoEntrega');
  const contenedorTienda = document.getElementById('contenedor-tienda');
  const contenedorDireccion = document.getElementById('contenedor-direccion');

  tipoEntrega.addEventListener('change', function () {
    if (this.value === 'tienda') {
      contenedorTienda.style.display = 'flex';
      contenedorDireccion.style.display = 'none';
    } else if (this.value === 'domicilio') {
      contenedorTienda.style.display = 'none';
      contenedorDireccion.style.display = 'flex';
    } else {
      contenedorTienda.style.display = 'none';
      contenedorDireccion.style.display = 'none';
    }
  });
</script>
<script>
  // Esperar a que todo el DOM esté completamente cargado
  document.addEventListener("DOMContentLoaded", function () {
    // Forzar el scroll al tope con un retardo leve
    setTimeout(function () {
      window.scrollTo({ top: 0, left: 0, behavior: "auto" });
    }, 100); // Puedes subir a 300ms si hay contenido que se carga dinámicamente
  });
</script>
{% endblock %}
