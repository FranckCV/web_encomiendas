<!-- <!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Simulador de Rastreo</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
    }
    #map {
      height: 80vh;
      width: 100%;
    }
    .panel {
      padding: 1rem;
      background: #f5f5f5;
    }
    input {
      padding: 0.5rem;
      margin-right: 0.5rem;
    }
  </style>
</head>
<body>

<div class="panel">
  <input type="text" id="placa" placeholder="Ingrese placa del vehículo (ej. ABC-123)">
  <button onclick="iniciarSimulacion()">Simular rastreo</button>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script>
  let map = L.map('map').setView([-6.7764, -79.8687], 15);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '&copy; OpenStreetMap',
  }).addTo(map);

  let marcador = null;

  function iniciarSimulacion() {
    const placa = document.getElementById('placa').value.trim().toUpperCase();
    if (!placa) {
      alert("Ingrese una placa válida.");
      return;
    }

    if ('geolocation' in navigator) {
      navigator.geolocation.watchPosition(pos => {
        const { latitude, longitude } = pos.coords;
        const coords = [latitude, longitude];

        if (!marcador) {
          marcador = L.marker(coords).addTo(map)
            .bindPopup(`Placa: ${placa}`)
            .openPopup();
        } else {
          marcador.setLatLng(coords);
        }

        map.setView(coords, 17);
      }, err => {
        alert("Error al obtener ubicación: " + err.message);
        console.error(err);
      }, {
        enableHighAccuracy: true,
        maximumAge: 0,
        timeout: 10000
      });
    } else {
      alert("Tu navegador no permite geolocalización.");
    }
  }
</script>

</body>
</html> -->



<!-- 

<script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
<script>
  const socket = io();

  navigator.geolocation.watchPosition(pos => {
    socket.emit("ubicacion_movil", {
      placa: "ABC123",
      lat: pos.coords.latitude,
      lng: pos.coords.longitude
    });
  });
</script>



-->