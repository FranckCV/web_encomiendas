{% extends 'MAESTRA_GENERAL.html' %}

{% block titulo %}
  Seguimiento de Reclamo
{% endblock %}

{% block estilos %}
  <link rel="stylesheet" href="/static/css/seguimiento.css" />
{% endblock %}

{% block contenido %}
  <div class="contenedor">
    <div class="header">
      <div class="order-search">
        <input type="text" placeholder="Nº de Reclamo" class="order-input" />
        <input type="text" placeholder="Nº de Documento" class="order-input" />
        <button class="search-btn">Buscar <i class="ri-arrow-right-line"></i></button>
      </div>
    </div>

    <div class="container_estado">
      <div class="card status-card">
        <div class="order-number">
          <p class="number">N° DE RECLAMO: RC-2025-001245</p>
        </div>
        <div class="status-detail">
          <img class="img_estado" src="{{ url_for('static', filename='img/reclamo_en_proceso.png') }}" alt="Reclamo en proceso" />

          <div class="status-content">
            <div class="status-header">
              <div class="status-title">
                <div class="documents">
                  <h3>Descargar documentos disponibles</h3>
                  <button class="grt-btn"><i class="fa-solid fa-download"></i></button>
                </div>
                <span id="selection-document">Seleccione los documentos que desea descargar</span>
                <div>
                  <input type="checkbox"> <label>Constancia de recepción del reclamo</label>
                  <br>
                  <input type="checkbox"> <label>Comunicación de respuesta</label>
                  <br>
                  <input type="checkbox"> <label>Resolución del reclamo</label>
                </div>
              </div>
            </div>
            <div>
              <h3 style="margin-bottom: 10px;">Estado actual: En evaluación</h3>
              <p><strong>Tipo de reclamo:</strong> Producto defectuoso</p>
              <p><strong>Motivo:</strong> Daños en el paquete durante el transporte</p>
              <p><strong>Monto reclamado:</strong> S/. 450.00</p>
              <p>Fecha de última actualización: 24/05/25 a las 16:30</p>
            </div>
          </div>
        </div>

        <!-- Tracker de progreso del reclamo -->
        <div class="progress-tracker">
          <div class="progress-line"></div>

          <!-- Paso 1: Recibido -->
          <div class="progress-step">
            <div class="step-icon">
              <span class="check-icon">✓</span>
            </div>
            <div class="step-label">Recibido</div>

            <div class="timeline">
              <div class="timeline-item active">
                <div class="timeline-dot"></div>
                <div class="timeline-line"></div>
                <div class="timeline-content">
                  <div class="timeline-title">Reclamo recibido</div>
                  <div class="timeline-date">20/05/25 - 14:25</div>
                  <div class="timeline-location">Sucursal Lima Centro - Se registró su reclamo</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Paso 2: En evaluación -->
          <div class="progress-step">
            <div class="step-icon">
              <span class="check-icon">⏳</span>
            </div>
            <div class="step-label">En evaluación</div>

            <div class="timeline">
              <div class="timeline-item active">
                <div class="timeline-dot"></div>
                <div class="timeline-line"></div>
                <div class="timeline-content">
                  <div class="timeline-title">Asignado a especialista</div>
                  <div class="timeline-date">21/05/25 - 09:15</div>
                  <div class="timeline-location">Área de Atención al Cliente</div>
                </div>
              </div>

              <div class="timeline-item active">
                <div class="timeline-dot"></div>
                <div class="timeline-line"></div>
                <div class="timeline-content">
                  <div class="timeline-title">Revisión de documentación</div>
                  <div class="timeline-date">22/05/25 - 11:40</div>
                  <div class="timeline-location">Verificación de evidencias presentadas</div>
                </div>
              </div>

              <div class="timeline-item active">
                <div class="timeline-dot"></div>
                <div class="timeline-line"></div>
                <div class="timeline-content">
                  <div class="timeline-title">Investigación en curso</div>
                  <div class="timeline-date">24/05/25 - 16:30</div>
                  <div class="timeline-location">Análisis del incidente reportado</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Paso 3: En resolución -->
          <div class="progress-step">
            <div class="step-icon">
              <span class="pending-icon">○</span>
            </div>
            <div class="step-label">En resolución</div>

            <div class="timeline">
              <div class="timeline-item pending">
                <div class="timeline-dot pending"></div>
                <div class="timeline-line"></div>
                <div class="timeline-content">
                  <div class="timeline-title">Pendiente de evaluación final</div>
                  <div class="timeline-date">Estimado: 27/05/25</div>
                  <div class="timeline-location">Determinación de procedencia del reclamo</div>
                </div>
              </div>
            </div>
          </div>

          <!-- Paso 4: Resuelto -->
          <div class="progress-step">
            <div class="step-icon">
              <span class="pending-icon">○</span>
            </div>
            <div class="step-label">Resuelto</div>

            <div class="timeline">
              <div class="timeline-item pending">
                <div class="timeline-dot pending"></div>
                <div class="timeline-line"></div>
                <div class="timeline-content">
                  <div class="timeline-title">Resolución pendiente</div>
                  <div class="timeline-date">Estimado: 30/05/25</div>
                  <div class="timeline-location">Comunicación de respuesta final</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Tarjeta de información del reclamo -->
      <div class="card info-card">
        <div class="info-section">
          <h3>Fecha de presentación: <span style="font-weight: normal; color: #666;">20/05/2025</span></h3>
        </div>
        <div class="info-section">
          <h3>Tiempo de respuesta: <span style="font-weight: normal; color: #666;">15 días hábiles</span></h3>
        </div>
        <div class="info-section">
          <h3>Sucursal de atención: <span style="font-weight: normal; color: #666;">Lima Centro</span></h3>
        </div>
      </div>

      <!-- Tarjeta de detalles del reclamo -->
      <div class="card details-card">
        <div class="detail-section">
          <i class="fa-solid fa-user icono"></i>
          <div class="detail-title">Reclamante</div>
          <div class="detail-value">María José González Pérez</div>
          <div class="detail-value">DNI: 45632871</div>
        </div>

        <div class="detail-section">
          <i class="fa-solid fa-exclamation-triangle icono"></i>
          <div class="detail-title">Tipo de reclamo</div>
          <div class="detail-value">Producto defectuoso</div>
          <div class="detail-value">Daños durante el transporte</div>
        </div>

        <div class="detail-section">
          <i class="fa-solid fa-box icono"></i>
          <div class="detail-title">Paquete relacionado</div>
          <div class="detail-value">Tracking: 45106974</div>
          <div class="detail-value">Contenido: Electrodoméstico</div>
        </div>

        <div class="detail-section">
          <i class="fa-solid fa-money-bill icono"></i>
          <div class="detail-title">Monto reclamado</div>
          <div class="detail-value">S/. 450.00</div>
        </div>

        <div class="detail-section">
          <i class="fa-solid fa-file-text icono"></i>
          <div class="detail-title">Descripción</div>
          <div class="detail-value">El paquete llegó con daños evidentes en el empaque exterior y el producto presenta abolladuras que afectan su funcionamiento normal.</div>
        </div>

        <div class="detail-section">
          <i class="fa-solid fa-clipboard-list icono"></i>
          <div class="detail-title">Solicitud</div>
          <div class="detail-value">Reembolso completo del valor del producto más gastos de envío por daños ocasionados durante el transporte.</div>
        </div>
      </div>

      <!-- Tarjeta de contacto -->
      <div class="card info-card">
        <div class="info-section">
          <h3>¿Necesita más información?</h3>
          <p style="color: #666; margin-top: 5px;">
            Puede contactarnos al teléfono <strong>(01) 123-4567</strong> o escribir a 
            <strong>reclamos@empresa.com</strong> mencionando su número de reclamo.
          </p>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  <script>
    // Función para mostrar/ocultar detalles del timeline
    document.addEventListener('DOMContentLoaded', function() {
      const timelineItems = document.querySelectorAll('.timeline-item');
      
      timelineItems.forEach(item => {
        item.addEventListener('click', function() {
          const content = this.querySelector('.timeline-content');
          if (content) {
            content.classList.toggle('expanded');
          }
        });
      });

      // Funcionalidad para los checkboxes de documentos
      const checkboxes = document.querySelectorAll('input[type="checkbox"]');
      const downloadBtn = document.querySelector('.grt-btn');
      
      checkboxes.forEach(checkbox => {
        checkbox.addEventListener('change', function() {
          const checkedBoxes = document.querySelectorAll('input[type="checkbox"]:checked');
          downloadBtn.style.opacity = checkedBoxes.length > 0 ? '1' : '0.5';
        });
      });

      // Función de búsqueda
      const searchBtn = document.querySelector('.search-btn');
      searchBtn.addEventListener('click', function() {
        const reclamoNum = document.querySelector('input[placeholder="Nº de Reclamo"]').value;
        const documento = document.querySelector('input[placeholder="Nº de Documento"]').value;
        
        if (reclamoNum || documento) {
          // Aquí iría la lógica de búsqueda
          console.log('Buscando reclamo:', reclamoNum, 'Documento:', documento);
        } else {
          alert('Por favor ingrese al menos un criterio de búsqueda');
        }
      });
    });
  </script>
{% endblock %}