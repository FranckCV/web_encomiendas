{% extends 'MAESTRA_GENERAL.html' %}

{% block titulo %}
Medios de Pago
{% endblock %}

{% block estilos %}
<link rel="stylesheet" href="/static/css/pago_envio.css">
{% endblock %}

{% block contenido %}
<div class="navigation-links">
  <a href="{{ url_for('mostrar_resumen') }}" class="back-link">← Regresar</a>
</div>

<div class="container metodo-pago">
  <h1 class="titulo-envio">REGISTRO DE ENVÍOS</h1>

  <div class="steps-container">
    <div class="step completed">
      <div class="circle"><img src="/static/img/usuario.png" alt="Paso 1" /></div>
      <p>Datos personales</p>
    </div>
    <div class="line"></div>
    <div class="step completed">
      <div class="circle"><img src="/static/img/chek.png" alt="Paso 2" /></div>
      <p>Confirma tus datos</p>
    </div>
    <div class="line"></div>
    <div class="step active">
      <div class="circle"><img src="/static/img/medio.png" alt="Paso 3" /></div>
      <p>Medios de pago</p>
    </div>
  </div>

  <h2 class="subtitulo">Elige tu medio de pago</h2>

  <div class="pago-content">
    <div class="opciones-pago">
      <!-- Opción 1 -->
      <label class="opcion" onclick="toggleIcons(this)">
        <div class="cabecera-opcion">
          <input type="radio" name="metodo" onchange="habilitarBotonPagar()" />
          <span class="texto">Pago con tarjeta de crédito, débito y Yape.</span>
          <img src="/static/img/metodo_pago.png" alt="Tarjeta" class="icono" />
        </div>
        <div class="iconos-pago oculto">
          <img src="/static/img/visa.webp" alt="Visa" class="icono-tarjeta" />
          <img src="/static/img/mastercard.jpg" alt="Mastercard" class="icono-tarjeta" />
          <img src="/static/img/Yape-v2.webp" alt="Yape" class="icono-tarjeta" />
        </div>
      </label>

      <!-- Opción 2 -->
      <label class="opcion" onclick="hideAllIcons()">
        <div class="cabecera-opcion">
          <input type="radio" name="metodo" onchange="habilitarBotonPagar()" />
          <span class="texto">Pago en bancos y banca por internet.</span>
          <img src="/static/img/empleado_oficina.png" alt="Banco" class="icono" />
        </div>
      </label>
    </div>

    <div class="resumen-box">
      <h3>Resumen de tu registro</h3>
      <table>
        <tr><td>Cantidad De Envíos:</td><td>2</td></tr>
        <tr><td>Sub Total:</td><td>S/ 15.76</td></tr>
        <tr><td>I.G.V.:</td><td>S/ 2.84</td></tr>
        <tr class="total"><td><strong>Total:</strong></td><td><strong>S/ 18.60</strong></td></tr>
      </table>

      <div class="cupon-box">
        <input type="text" placeholder="AÑADIR CUPÓN DE DESCUENTO" />
        <button class="btn-validar">VALIDAR</button>
      </div>
    </div>
  </div>

  <!-- Botón PAGAR centrado -->
  <div class="boton-pagar-container">
    <button id="btn-pagar" class="btn-pagar oculto" disabled>PAGAR S/ 18.60</button>
  </div>
</div>
{% endblock %}

{% block scripts %}
<script>
  function toggleIcons(label) {
    document.querySelectorAll('.iconos-pago').forEach(group => group.classList.add('oculto'));
    const iconos = label.querySelector('.iconos-pago');
    if (iconos) iconos.classList.remove('oculto');
  }

  function hideAllIcons() {
    document.querySelectorAll('.iconos-pago').forEach(group => group.classList.add('oculto'));
  }

  function habilitarBotonPagar() {
    const boton = document.getElementById("btn-pagar");
    boton.classList.remove("oculto");
    boton.disabled = false;
  }
</script>
{% endblock %}
