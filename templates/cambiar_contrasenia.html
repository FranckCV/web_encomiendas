{% extends "MAESTRA_LOGIN.html" %}

{% block estilos %}

{% endblock %}

{% set TITULO_FORM = 'Cambiar contraseña' %}
{% set URL_POST = '' %}
{% set URL_BG = 'bg1.jpg' %}

{% block contenido_form %}

<div class="input_box">
    <input type="password" name="contrasena_actual" id="contrasena_actual" placeholder="Contraseña actual" required>
    <i class="fa-solid fa-lock"></i>
</div>

<div class="input_box">
    <input type="password" name="nueva_contrasena" id="nueva_contrasena" placeholder="Nueva contraseña" required>
    <i class="fa-solid fa-lock"></i>
</div>

<div class="input_box">
    <input type="password" name="confirmar_contrasena" id="confirmar_contrasena" placeholder="Confirmar nueva contraseña" required>
    <i class="fa-solid fa-lock"></i>
</div>

{% endblock %}

{% block pre_btn %}
<p class="instruccion">Ingresa tu contraseña actual y define una nueva para completar el cambio.</p>
{% endblock %}

{% set BTN_NAME = 'Actualizar contraseña' %}

{% block post_btn %}
<p><a href="{{ url_for('login') }}">Volver a inicio de sesión</a></p>
{% endblock %}

{% block scripts %}
<script>
    document.addEventListener('DOMContentLoaded', function () {
        const formCambio = document.getElementById('form_cambio');

        formCambio.addEventListener('submit', function (event) {
            event.preventDefault();

            const actual = document.getElementById('contrasena_actual').value;
            const nueva = document.getElementById('nueva_contrasena').value;
            const confirmar = document.getElementById('confirmar_contrasena').value;

            if (nueva !== confirmar) {
                alert('La nueva contraseña no coincide con la confirmación');
                return;
            }

            // Aquí puedes hacer la solicitud con fetch al backend
            // incluyendo la contraseña actual y la nueva

            alert('Contraseña actualizada correctamente');

            // Redirigir si lo deseas
            // window.location.href = "{{ url_for('login') }}";
        });
    });
</script>
{% endblock %}
